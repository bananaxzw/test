<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <title>opacity_CSS参考手册_web前端开发参考手册</title>
    <meta name="author" content="Joy Du(飘零雾雨), dooyoe@gmail.com" />
    <meta name="copyright" content="www.doyoe.com" />
    <script type="text/javascript">
        function getNodeAlpha(node) {
            var val
            if (! +"\v1") {
                return (val = /opacity=([^)]*)/.exec(node.currentStyle.filter)) ? parseInt(val[1]) : 100;
            }
            return (val = node.ownerDocument.defaultView.getComputedStyle(node, null).opacity) ? val * 100 : 100;
        }
        function setNodeAlphoa(node, opacityValue) {
            opacityValue = parseInt(opacityValue,10) > 100 ? 100 : opacityValue < 0 ? 0 : opacityValue;
            if (+"\v1") {
                node.style.opacity = opacityValue / 100;
            }
            else {
                var style = node.style;
                style.zoom = 1;
                var opacityString = opacityValue + "" === "NaN" ? "" : "alpha(opacity=" + opacityValue + ")";
                style.filter = /alpha\([^)]*\)/.test(filter) ? filter.replace(/alpha\([^)]*\)/, opacityString) : opacityString;
            }
        }
    </script>
    <style>
        h1
        {
            margin: 10px 0;
            font-size: 16px;
        }
        .test
        {
            width: 300px;
            height: 150px;
            padding: 10px;
            background: #050;
        }
        .test2
        {
            width: 300px;
            height: 150px;
            margin: -120px 0 0 50px;
            padding: 10px;
            background: #000;
            filter: alpha(opacity=50);
            opacity:.7;
            color: #fff;
        }
    </style>
</head>
<body>
    <h1>
        下例是一个半透明的效果：</h1>
    <div>
        不透明度为100%的box</div>
    <div id="test2" class="test2">
        不透明度为50%的box</div>
    <script type="text/javascript">
        var node = document.getElementById("test2");
        console.log(getNodeAlpha(node));

        setNodeAlphoa(node, 70);
        console.log(getNodeAlpha(node));
    </script>
</body>
</html>
